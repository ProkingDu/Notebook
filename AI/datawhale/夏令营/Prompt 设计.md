## 什么是Prompt

在人工智能领域，Prompt 是一个非常重要的概念。它是指 **一段给定的文本或语句，用于启动和引导机器学习模型生成特定类型、主题或格式的输出。** 在最近几年中，随着深度学习技术不断发展和进步，在自然语言处理、图像识别等领域中广泛使用了 Prompt 技术。

**Prompt可以理解为启动机器学习模型的方式，他是一段文本或者语句，用于引导模型产生特定类型、格式或者主题的输出。**

在自然语言处理领域中，Prompt 通常由一个问题或任务描述组成，例如“给我写一篇有关人工智能的文章”、“翻译这个英文句子到法语”等等。在图像识别领域中，Prompt 则可以是一个图片描述、标签或分类信息。

与传统的监督式训练不同，**在使用 Prompt 进行训练时，并不需要对每个样本都进行标注，而是通过给定的 Prompt 来引导模型生成相应的输出。** 这种方式可以大大减少数据标注的工作量，并且能够更好地控制模型生成结果的质量和多样性。


## Prompt的应用场景

依据大模型的推理能力，Prompt具有多种适用的场景，最具有典型的是在大语言模型中的自然语言处理能力。

其中大概可以包括：
1. 文本生成
2. 问答系统
3. 信息提取
4. 文本翻译
5. ......


对于具有图像处理能力的大模型，其通常可以通过设计合理的Prompt来进行适应的图像处理任务，例如：
1. 图像生成
2. 图像分类
3. 图像解释
4. 图像优化
5. ......


无论是单纯处理文本的大语言模型，还是具有图像处理能力的大模型，设计Prompt都是具有一般性的方法，接下来将对Prompt设计的要点进行陈述。

## Co-Star框架
在Prompt设计中，符合惯例的一个较好的设计原则是通过**CO-Star框架**来搭建Prompt架构。

CO-STAR 框架是一种可以方便用于设计 prompt 结构的模板，这是新加坡政府科技局的数据科学与 AI 团队的创意成果。该模板考虑了会影响 LLM 响应的有效性和相关性的方方面面，从而有助于得到更优的响应。

![小杜的个人图床](http://src.xiaodu0.com/2024/07/18/d1716010e2b6ba1710403df06647751b.png)

如上图所示，Co-Star框架包含六个方面：
1. 上下文（Context）
2. 目标（Objective）
3. 风格（Style）
4. 语气（Tone）
5. 受众（Audience）
6. 响应（Response）

### Context

在Prompt设计中，上下文应当提供任务有关的背景信息，这有助于LLM理解正在讨论的具体场景，从而确保其响应是相关的。


### Objective

通过Objective定义你希望 LLM 执行的任务。明晰目标有助于 LLM 将自己响应重点放在完成具体任务上。

通常我们在设计Prompt的时候就已经大概明确了目标，例如需要大模型生成一段关于个人介绍的文本，亦或者是对某个图像进行解释等等。

### Style

指定你希望 LLM 使用的写作风格。这可能是一位具体名人的写作风格，也可以是某种职业专家（比如商业分析师或 CEO）的风格。这能引导 LLM 使用符合你需求的方式和词语给出响应。

### Tone

设定响应的态度。这能确保 LLM 的响应符合所需的情感或情绪上下文，比如正式、幽默、善解人意等。

### Audience

确定响应的目标受众。针对具体受众（比如领域专家、初学者、孩童）定制 LLM 的响
应，确保其在你所需的上下文中是适当的和可被理解的。


### Response

提供响应的格式。这能确保 LLM 输出你的下游任务所需的格式，比如列表、JSON、专业报告等。对于大多数通过程序化方法将 LLM 响应用于下游任务的 LLM 应用而言，理想的输出格式是 JSON。

### Example

根据以上Co-star框架的六个要素，尝试设计一个简答的Prompt和使用Co-star框架的Prompt来对比GPT-4的回答。

首先是简单的Prompt：
```
请帮我设计一份用户登录的前端页面。
```

GPT-4的回复是这样一份简单的页面：

![小杜的个人图床](http://src.xiaodu0.com/2024/07/18/0beb4160eb2c480fa4eea18d2be839ca.png)

应用了Co-star框架的Prompt：
```
我在一家网络传媒公司做前端设计的工作，现在我的上司为我分配了一个设计为公司官网提供用户注册功能的页面，同时需要在页面中切换登录和注册两个表单。并且这个页面需要符合公司形象和具有行业元素。
# Context
请你帮我设计一份这样的一份网页，提供给我源代码，这个页面旨在增加用户的交互性和体验感，同时丰富公司官网的功能。
# Objective
遵循类似的前端设计标准，保证网页设计的规范性以及布局的交互性，网页整体要具有高级感，需要具有一定的装饰元素。
# Style
内容是具有吸引力的、能够产生情感共鸣的。
#Tone
使用这个页面的客户群体是访问我们公司官网的人群，通常是同类行业从业者和潜在客户，或者是从事自媒体相关的工作人员，以及对网站进行备案审核的审核人员。
# Audience
请直接给我这样的一份网页源代码，代码应当符合相关技术上的代码规范，使用原生的前端技术，不限长度，在可能的前提下，多做出回复，产生尽量多的页面内容。
# Response
```

应用了Co-Star框架后输出的页面：
![小杜的个人图床](http://src.xiaodu0.com/2024/07/18/7a87b55905bbb19b92822c9671f54285.png)

相比原来的页面，这个页面加入了网页背景，并且在页面载入时添加了过渡效果。

实际上上面的Prompt仍然不够完善，针对前端设计这类复杂的需求，还应当包括如下具体的方面以产生预期的成效：
1. 页面具体包含的内容，例如包含表单，表单元素包含的内容
2. 页面的布局样式，例如是水平布局还是垂直布局，是双栏布局还是单栏布局。
3. 页面的配色
4. 使用的技术栈等

再次优化上面的Prompt：
```
我在一家网络传媒公司做前端设计的工作，现在我的上司为我分配了一个设计为公司官网提供用户注册功能的页面，同时需要在页面中切换登录和注册两个表单。并且这个页面需要符合公司形象和具有行业元素。
# Context
请你帮我设计一份这样的一份网页，提供给我源代码，这个页面旨在增加用户的交互性和体验感，同时丰富公司官网的功能。
注册的表单包括：昵称、账号、邮箱、密码、联络地址、验证码
登录的表单包括：账号、密码、验证码
# Objective
遵循类似的前端设计标准，保证网页设计的规范性以及布局的交互性，网页整体要具有高级感，需要具有一定的装饰元素。整个页面应当采用双栏布局，即左右两块可选的表单可以切换和隐藏。
页面配色使用橘色系作为主色调。
# Style
内容是具有吸引力的、能够产生情感共鸣的，页面具有温暖的感觉。
#Tone
使用这个页面的客户群体是访问我们公司官网的人群，通常是同类行业从业者和潜在客户，或者是从事自媒体相关的工作人员，以及对网站进行备案审核的审核人员。
# Audience
请直接给我这样的一份网页源代码，代码应当符合相关技术上的代码规范，使用原生的前端技术，不限长度，在可能的前提下，多做出回复，产生尽量多的页面内容。
# Response
```

![小杜的个人图床](http://src.xiaodu0.com/2024/07/18/42c03a1f9efe3e6a51823df6b0fb421a.png)

这次产生的页面相对之前的更加符合要求，像是这类具有明确输入的任务，Prompt设计的核心要点只有两个字：**详细。**

如果是开放式的任务呢，例如一个典型的文本生成任务，在随意设计Prompt的情况下：
```
帮我生成一篇博客文章，详细的介绍JavaScript中的promise与异步机制。
```
![小杜的个人图床](http://src.xiaodu0.com/2024/07/18/df6cd37f3edbc8bf1d621f5c73062616.png)

这一Prompt生成的内容已经较为详细合理了，如果加上Co-Star框架约定的要素呢，据此查看GPT的输出：
```
我是一名个人开发者，我搭建了一个基于wordpress的个人博客，我习惯于在博客上发布我的学习笔记和感悟，现在我想尝试通过AI来编写一些技术文章用以充实博客内容和提高搜索引擎权重。
# Context

请你帮我生成一篇关于JavaScript中的Promise对象与异步机制的文章，在文章中详细介绍Promise和异步编程，并且给出具体的代码示例和应用场景。
# Objective

假设你是一名资深的个人开发者，以传授经验的角度生成这篇文章。
# Style

文章包含的情感以严谨为主，同时伴随生动有趣的描述介绍。
# Tone

文章的受众群体是热爱编程开发的学习者，他们大多是从搜索引擎或者各种渠道访问我的博客的。
# Audience

你生成的文章应当具有流畅的行文结构，标题分布要合理，在HTML网页中能够清晰的展示出来，并且方便布局。
使用Markdown语法回答。
# Response
```

将其输出的结果不经整理直接复制到我的博客中发布：
![小杜的个人图床](http://src.xiaodu0.com/2024/07/18/6f59917486c8a99372a2fc9affff30ad.png)

从右侧的目录可以看出，GPT输出了标准的Markdown格式内容，并且具有清晰的目录结构。

## 使用分隔符

对于给定文本数据，需要通过LLM对其进行分析，使用分割符来分割文本是一个极好的方法，通常我们使用特殊字符或者是XML标签对文本进行分割，将Prompt中的问题和数据分开。

例如：
```
我有一些比较长的对话数据，现在需要你将分析他们其中包含的情感，每个独立的文本通过XML标签包裹。
# Context

将以下整理好的文本分析并告诉我他们所表达的情绪，通过两个字的情绪形容词来描述。
# Objective

你只需要按顺序回答每个文本对应的情绪形容词即可。
# Style

响应的格式严格按照：<<情绪>>
# Response

文本数据如下：

<text>
胆子再大的市委书记也绝对不敢找反贪局双规纪委书记。这消息要是一传出来，省委书记直接就能把他给切喽，把他先规了再说。	黄一直混在媒体圈子，小桥老树人家好歹混到副处级，为人也比他低调多了，沉得下心用在文字上	小桥老树的三观正确、积极、正面，黄晓阳急功近利，认为自己文章写得好，当然也能当大官。
</text>
<text>
这年头玻璃心的人怎么这么多。29岁的人了，不管有你说的以上什么原因，对待女性及家人都应该有基本的底线和标准，为了自己不知道为什么的私欲，企图在QQ上就先以演戏的方式让别人厌恶，既不成熟也不尊重。调侃的就是这种人，活该	既然你说我是玻璃心，那你应该知道我那脆弱的心脏可承受不了你说我是玻璃心的事实，你看，已经碎得满地是渣渣了。礼尚往来是中华民族的传统美德，你既然送了我一颗晶莹的玻璃心，那我就回赠你几句话吧。首先，我对你对玻璃心的定义不认同，我不认为比你心里底线低的人都有颗玻璃心；其次，我不同意用自己讨厌的行为去恶心自己讨厌的人，那样，自己也就成了自己讨厌的那种人了是不？最后，我认为喜欢站在别人角度考虑问题的女孩最美了，而不是喜欢以自己的价值观为锚点，通过干掉自己不喜欢的人来实现世界和平的女孩。本来不想回的，只是评论区这么长，你还能看到并且评论我的话，还真不容易。	因为喜欢看大家如何调侃楼主的啊 然后偶尔看到个不一样的就顺手回复了 呵呵既没兴趣想干掉意见不同的你也没义务站在内心脆弱的角度去为他人着想 管我什么事嘛我们都是来看热闹的
</text>
<text>
可是我觉得他新女友才丑呢我不能算漂亮但是也不会差家里虽然不是大富但也是中层往上比他家好多了虽然不是本地人但在本地有俩套房产	其實是這樣的〜〜如果是我我肯定不跟妳分〜這些都是些什麼人啊渣男那麼多悲哀	表酱其实我就是不甘心很难过不甘心
</text>
```

（梯子掉了，用文心一言测试）![小杜的个人图床](http://src.xiaodu0.com/2024/07/18/d3dee94e471555e928b611ef5a9666cd.png)

如果不对文本进行分割，而是使用换行的形式：
```
我有一些比较长的对话数据，现在需要你将分析他们其中包含的情感.
将以下整理好的文本分析并告诉我他们所表达的情绪，通过两个字的情绪形容词来描述。
你只需要按顺序回答每个文本对应的情绪形容词即可。
响应的格式严格按照：<<情绪>>


文本数据如下：
胆子再大的市委书记也绝对不敢找反贪局双规纪委书记。这消息要是一传出来，省委书记直接就能把他给切喽，把他先规了再说。	黄一直混在媒体圈子，小桥老树人家好歹混到副处级，为人也比他低调多了，沉得下心用在文字上	小桥老树的三观正确、积极、正面，黄晓阳急功近利，认为自己文章写得好，当然也能当大官。

这年头玻璃心的人怎么这么多。29岁的人了，不管有你说的以上什么原因，对待女性及家人都应该有基本的底线和标准，为了自己不知道为什么的私欲，企图在QQ上就先以演戏的方式让别人厌恶，既不成熟也不尊重。调侃的就是这种人，活该	既然你说我是玻璃心，那你应该知道我那脆弱的心脏可承受不了你说我是玻璃心的事实，你看，已经碎得满地是渣渣了。礼尚往来是中华民族的传统美德，你既然送了我一颗晶莹的玻璃心，那我就回赠你几句话吧。首先，我对你对玻璃心的定义不认同，我不认为比你心里底线低的人都有颗玻璃心；其次，我不同意用自己讨厌的行为去恶心自己讨厌的人，那样，自己也就成了自己讨厌的那种人了是不？最后，我认为喜欢站在别人角度考虑问题的女孩最美了，而不是喜欢以自己的价值观为锚点，通过干掉自己不喜欢的人来实现世界和平的女孩。本来不想回的，只是评论区这么长，你还能看到并且评论我的话，还真不容易。	因为喜欢看大家如何调侃楼主的啊 然后偶尔看到个不一样的就顺手回复了 呵呵既没兴趣想干掉意见不同的你也没义务站在内心脆弱的角度去为他人着想 管我什么事嘛我们都是来看热闹的

可是我觉得他新女友才丑呢我不能算漂亮但是也不会差家里虽然不是大富但也是中层往上比他家好多了虽然不是本地人但在本地有俩套房产	其實是這樣的〜〜如果是我我肯定不跟妳分〜這些都是些什麼人啊渣男那麼多悲哀	表酱其实我就是不甘心很难过不甘心
```

![小杜的个人图床](http://src.xiaodu0.com/2024/07/18/6a98fb09eb612e7c74e330e5121178ab.png)

LLM错误的将三段文本处理为了六段文本。

